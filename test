local mon = peripheral.find("monitor")
local net = peripheral.find("modem")

local monitor = "none"
local CellSide = "none"
local DynamoSide = "none"
local MonitorSide = "none"

netside = net.getNamesRemote()

netlist = {}

function detectNetworkedDevice(DeviceName)
  for k,v in pairs(netside) do
    if peripheral.getType(v)==DeviceName then
      DeviceSide = v
      break
    end
  end
  return(DeviceSide)
end

function detectDevice(DeviceName)
  DeviceSide="none"
  for k,v in pairs(redstone.getSides()) do
   if peripheral.getType(v)==DeviceName then
     DeviceSide = v
     break
   end
  end
  return(DeviceSide)
end

monitor = detectDeveice(monitor)

if monitor ~= nil then
  mon = peripheral.wrap("monitor")
  mon.clear()
  mon.setCursorPos(1,1)
  mon.write("It worked!")
else
  monitor = detectNetworkedDevice("monitor")
  if monitor ~= nil then
    mon = peripheral.find("monitor")
    mon.clear()
    mon.setCursorPos(1,1)
    mon.write("It worked on network!")
  else
  print("It didn't work.")
  print("At least there is cake")
  end
end
